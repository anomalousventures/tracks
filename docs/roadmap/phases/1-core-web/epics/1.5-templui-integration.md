# Epic 1.5: Templ-UI Integration

[← Back to Phase 1](../1-core-web.md) | [← Epic 1.4](./1.4-web-build-pipeline.md)

**Decision:** [ADR-009: Templ-UI for UI Components](../../../adr/009-templui-for-ui-components.md)

## Overview

Create templates and generator logic to integrate templ-ui as the core UI component library for generated applications. This epic implements templui.yaml configuration template, ProjectGenerator integration to run `templui init` during project creation, and CLI commands for managing components in generated projects. Users own the copied component code and can customize freely, following the shadcn/ui philosophy of "copy code, own components."

## Goals

- Templates for templ-ui configuration in generated projects
- ProjectGenerator runs `templui init` during `tracks new`
- Starter component set installed automatically in generated projects
- `tracks ui add <component>` command for generated projects
- `tracks ui list` command for generated projects
- Components copied to `internal/http/views/components/ui/`
- Tailwind config template includes templ-ui styles
- Example page templates using templ-ui components
- Generated projects have working UI component library

## Scope

### In Scope

- templui.yaml configuration template
- go.mod template update to include templui tool directive
- ProjectGenerator integration to run `templui init`
- Tailwind config template update for templ-ui styles
- Example page templates using components
- `tracks ui` CLI command suite (add, list, update, remove)
- Component usage documentation templates
- Component customization guide templates
- Tests for component installation in generated projects

### Out of Scope

- Custom component development (users do this)
- Complex form validation libraries (future)
- Data tables with server-side pagination (future)
- Chart/graph components (future)
- Rich text editors (future)
- Component testing framework (future)

## Task Breakdown

The following tasks will become GitHub issues, ordered by dependency:

### Phase 1: Templui Configuration Templates (Tasks 1-10)

1. Create templui.yaml configuration template
2. Add templui to go.mod tool directive template
3. Update Tailwind config template for templ-ui styles
4. Create component directory structure template
5. Create form example page template
6. Create layout example page template
7. Create feedback example page template
8. Create component gallery page template
9. Create component usage documentation template
10. Create component customization guide template

### Phase 2: ProjectGenerator Integration (Tasks 11-20)

1. Wire templui.yaml template into ProjectGenerator
2. Update go.mod template rendering to include templui
3. Update Tailwind config template rendering
4. Implement `templui init` execution during project generation
5. Verify starter components installed in correct location
6. Wire example page templates into ProjectGenerator
7. Wire component documentation templates into ProjectGenerator
8. Test templui initialization in generated projects
9. Test components render correctly in generated projects
10. Integration test: verify component gallery page works

### Phase 3: tracks ui CLI Commands (Tasks 21-35)

1. Create `tracks ui` subcommand structure
2. Implement `tracks ui add <component>` subcommand
3. Implement `tracks ui list` subcommand
4. Implement `tracks ui update <component>` subcommand
5. Implement `tracks ui remove <component>` subcommand
6. Implement `tracks ui search <query>` subcommand
7. Add component name validation
8. Add progress output for component installation
9. Add `--force` flag for component updates
10. Add JSON output support (`--json` flag)
11. Create unit tests for ui commands
12. Create integration tests for ui commands
13. Document ui command reference
14. Add ui commands to main README
15. Create ui command troubleshooting guide

### Phase 4: Testing & Validation (Tasks 36-45)

1. Test templui.yaml renders correctly
2. Test templui tool directive in generated go.mod
3. Test Tailwind config includes templ-ui styles
4. Test `templui init` runs successfully during generation
5. Test starter components copied to correct location
6. Test `tracks ui add` installs components correctly
7. Test `tracks ui list` shows available components
8. Test example pages render with components
9. Test dark mode works with components
10. Integration test: full component workflow in generated project

## Dependencies

### Prerequisites

- Phase 0 completed (project generation working)
- Epic 1.1 completed (Chi router)
- Epic 1.2 completed (Templ templates)
- Epic 1.3 completed (HashFS assets)
- Epic 1.4 completed (TailwindCSS and Alpine.js)
- Go 1.25+ (tool directive support)

### External Dependencies

- `github.com/templui/templui` - Component library and CLI (added to generated go.mod)
- TailwindCSS (from Epic 1.4)
- Alpine.js (from Epic 1.4)
- templ (from Epic 1.2)

### Blocks

- Epic 1.6 (Documentation) - needs component examples

## Acceptance Criteria

### Templates Created

- [ ] templui.yaml template exists
- [ ] go.mod template includes templui tool directive
- [ ] Tailwind config template includes templ-ui styles
- [ ] Component directory structure template exists
- [ ] Example page templates exist (form, layout, feedback, gallery)
- [ ] Component documentation templates exist
- [ ] All templates use Go template syntax correctly

### Generator Integration

- [ ] ProjectGenerator renders templui.yaml
- [ ] ProjectGenerator renders updated go.mod with templui
- [ ] ProjectGenerator renders updated Tailwind config
- [ ] ProjectGenerator executes `templui init` during project creation
- [ ] Starter components installed in `internal/http/views/components/ui/`
- [ ] Example pages rendered in generated projects
- [ ] Component documentation rendered in generated projects

### tracks ui Commands

- [ ] `tracks ui add <component>` installs component in generated project
- [ ] `tracks ui list` shows available and installed components
- [ ] `tracks ui update <component>` updates component from upstream
- [ ] `tracks ui remove <component>` removes component
- [ ] `tracks ui search <query>` finds components
- [ ] JSON output support (`--json` flag)
- [ ] Error handling with helpful messages
- [ ] Unit tests for ui commands pass
- [ ] Integration tests verify component installation

### Generated Code Quality

- [ ] Generated templui.yaml valid
- [ ] Generated components render correctly
- [ ] Generated example pages work
- [ ] Components work in dark mode
- [ ] Generated component tests pass (verified by e2e-workflow)

### Testing

- [ ] Unit tests verify template rendering
- [ ] Integration tests verify templui initialization
- [ ] Integration tests verify component installation
- [ ] All tests pass in CI

## Next Epic

[Epic 1.6: Middleware Stack & Documentation →](./1.6-middleware-documentation.md)
