# Epic 1.2: Templ Templates

[← Back to Phase 1](../1-core-web.md) | [← Epic 1.1](./1.1-chi-router-setup.md)

## Overview

Create templates and generator logic to integrate templ for type-safe HTML templating in generated projects. This epic implements template files for view layer structure, base layouts, component patterns, and handler integration. The ProjectGenerator will render these templates when running `tracks new`, creating a production-ready view layer with compile-time type safety.

## Goals

- Templates for templ-based view layer in generated projects
- View directory structure templates (layouts, pages, components)
- Base layout template with common HTML structure
- Component composition pattern templates
- Helper function templates for common patterns
- Handler templates that render templ components
- Makefile integration for templ generation
- Generated projects build and render templates correctly

## Scope

### In Scope

- View directory structure templates
- base.templ template for layouts
- Page templates (home.templ, about.templ, error.templ)
- Helper function templates (ClassNames, SafeHTML, etc.)
- Handler templates that render templ components
- Templ CLI in go.mod tool directive template
- Makefile targets for templ generation
- .templignore template
- Tests for generated templates
- ProjectGenerator integration

### Out of Scope

- Templ-UI component library (Epic 1.5)
- TailwindCSS compilation (Epic 1.4)
- Alpine.js integration (Epic 1.4)
- Asset serving with hashfs (Epic 1.3)
- Full CRUD page examples (future epics)
- Complex component libraries (Epic 1.5)

## Task Breakdown

The following tasks will become GitHub issues, ordered by dependency:

### Phase 1: View Structure Templates (Tasks 1-10)

1. Create view directory structure template
2. Create base.templ layout template
3. Create home.templ page template
4. Create about.templ page template
5. Create error.templ page template (404, 500)
6. Create helpers.go template with ClassNames, SafeHTML functions
7. Create .templignore template
8. Add templ to go.mod tool directive template
9. Add templ generation to Makefile template
10. Create meta.templ component template

### Phase 2: Handler Integration Templates (Tasks 11-20)

1. Create handler template that renders templ components
2. Update home handler template to use templ
3. Update about handler template to use templ
4. Create error handler template with templ rendering
5. Create context helper template for template data
6. Create render helper template for common patterns
7. Update routes.go template to register new handlers
8. Create handler_test.go template for templ rendering tests
9. Create integration test template for full page rendering
10. Document handler-to-template integration in generated README

### Phase 3: Component Pattern Templates (Tasks 21-30)

1. Create nav.templ component template
2. Create footer.templ component template
3. Create flash message component template
4. Create breadcrumb component template
5. Create card component template
6. Create form input component template
7. Create button component template
8. Create modal component template
9. Create component props pattern documentation template
10. Create component composition examples in generated README

### Phase 4: Advanced Pattern Templates (Tasks 31-40)

1. Create HTMX attribute helper templates
2. Create dark mode toggle component template
3. Create layout with sidebar template
4. Create partial rendering pattern template
5. Create form validation display template
6. Create list page pattern template
7. Create detail page pattern template
8. Create template error handling pattern
9. Create template performance documentation
10. Create templ troubleshooting guide template

### Phase 5: ProjectGenerator Integration & Testing (Tasks 41-50)

1. Wire view directory structure into ProjectGenerator
2. Wire all .templ templates into ProjectGenerator
3. Wire helpers.go template into ProjectGenerator
4. Wire handler templates into ProjectGenerator
5. Update go.mod template rendering to include templ
6. Update Makefile template rendering for templ targets
7. Test generated templates compile with `go tool templ generate`
8. Test generated handlers render templates correctly
9. Integration test: verify generated project's template tests pass
10. Integration test: verify generated pages render in browser

## Dependencies

### Prerequisites

- Phase 0 completed (project generation working)
- Epic 1.1 completed (Chi router and handlers)
- Go 1.25+ (tool directive support)

### External Dependencies

- `github.com/a-h/templ` - Template engine (added to generated go.mod)
- HTMX (loaded via CDN initially, bundled in Epic 1.4)
- Standard library: `html/template` (for SafeHTML helper)

### Blocks

- Epic 1.3 (HashFS Assets) - needs templates for asset URL helpers
- Epic 1.4 (Web Build Pipeline) - needs templates for TailwindCSS class scanning
- Epic 1.5 (Templ-UI Integration) - builds on component patterns

## Acceptance Criteria

### Templates Created

- [ ] View directory structure template exists
- [ ] base.templ template exists
- [ ] Page templates exist (home, about, error)
- [ ] Component templates exist (nav, footer, meta)
- [ ] helpers.go template exists
- [ ] Handler templates render templ components
- [ ] Test templates verify rendering works

### Generator Integration

- [ ] ProjectGenerator creates view directory structure
- [ ] ProjectGenerator renders all .templ templates
- [ ] ProjectGenerator renders helpers.go
- [ ] Templ dependency appears in generated go.mod
- [ ] Templ generation appears in generated Makefile
- [ ] .templignore appears in generated project

### Generated Code Quality

- [ ] Generated templates compile with `go tool templ generate`
- [ ] Generated handlers render templates without errors
- [ ] Generated template tests pass
- [ ] Generated code passes `go vet`
- [ ] Generated code passes `golangci-lint`

### Testing

- [ ] Unit tests verify template rendering in tracks repo
- [ ] Generated project's tests pass (verified by e2e-workflow)
- [ ] Integration tests verify pages render correctly
- [ ] All CI jobs pass

## Next Epic

[Epic 1.3: HashFS Assets →](./1.3-hashfs-assets.md)
