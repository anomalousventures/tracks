# Epic 1.2: Templ Templates

[← Back to Phase 1](../1-core-web.md) | [← Epic 1.1](./1.1-chi-router-setup.md)

## Overview

Create templates and generator logic to integrate templ for type-safe HTML templating in generated projects. This epic implements template files for view layer structure, base layouts, component patterns, and handler integration. The ProjectGenerator will render these templates when running `tracks new`, creating a production-ready view layer with compile-time type safety.

## Goals

- Templates for templ-based view layer in generated projects
- View directory structure templates (layouts, pages, components)
- Base layout template with common HTML structure
- Component composition pattern templates
- Helper function templates for common patterns
- Handler templates that render templ components
- Makefile integration for templ generation
- Generated projects build and render templates correctly

## Scope

### In Scope

- View directory structure templates
- base.templ template for layouts
- Page templates (home.templ, about.templ, error.templ)
- Helper function templates (ClassNames, SafeHTML, etc.)
- Handler templates that render templ components
- Templ CLI in go.mod tool directive template
- Makefile targets for templ generation
- .templignore template
- Tests for generated templates
- ProjectGenerator integration

### Out of Scope

- Templ-UI component library (Epic 1.5)
- TailwindCSS compilation (Epic 1.4)
- Alpine.js integration (deferred to post-MVP; Templ-UI provides component interactivity)
- Counter component integration to homepage (moves to Epic 1.4 after assets pipeline)
- Asset serving with hashfs (Epic 1.3)
- Full CRUD page examples (future epics)
- Complex component libraries (Epic 1.5)

## Task Breakdown

The following tasks will become GitHub issues, ordered by dependency:

### Phase 1: View Structure Templates (Tasks 1-10)

1. [#303](https://github.com/anomalousventures/tracks/issues/303) - Create view directory structure template (`internal/http/views/` with subdirs: `layouts/`, `pages/`, `components/`, and `helpers.go`)
2. [#304](https://github.com/anomalousventures/tracks/issues/304) - Create base.templ layout template
3. [#305](https://github.com/anomalousventures/tracks/issues/305) - Create home.templ page template
4. [#306](https://github.com/anomalousventures/tracks/issues/306) - Create about.templ page template
5. [#307](https://github.com/anomalousventures/tracks/issues/307) - Create error.templ page template (404, 500)
6. [#308](https://github.com/anomalousventures/tracks/issues/308) - Create helpers.go template with ClassNames, SafeHTML functions
7. [#309](https://github.com/anomalousventures/tracks/issues/309) - Create .templignore template
8. [#310](https://github.com/anomalousventures/tracks/issues/310) - Verify templ dependency in go.mod template (already present in tool directive)
9. [#311](https://github.com/anomalousventures/tracks/issues/311) - Add templ generation command to Makefile generate target chain
10. [#312](https://github.com/anomalousventures/tracks/issues/312) - Create meta.templ component template

### Phase 2: Handler Integration Templates (Tasks 11-20)

1. [#313](https://github.com/anomalousventures/tracks/issues/313) - Create handler template that renders templ components
2. [#314](https://github.com/anomalousventures/tracks/issues/314) - Create home handler template using templ rendering
3. [#315](https://github.com/anomalousventures/tracks/issues/315) - Create about handler template using templ rendering
4. [#316](https://github.com/anomalousventures/tracks/issues/316) - Create error handler template with templ rendering
5. [#317](https://github.com/anomalousventures/tracks/issues/317) - Create context helper template for template data
6. [#318](https://github.com/anomalousventures/tracks/issues/318) - Create render helper template for common patterns
7. [#319](https://github.com/anomalousventures/tracks/issues/319) - Update routes.go template to register new handlers
8. [#320](https://github.com/anomalousventures/tracks/issues/320) - Create handler_test.go template for templ rendering tests
9. [#321](https://github.com/anomalousventures/tracks/issues/321) - Create integration test template for full page rendering
10. [#322](https://github.com/anomalousventures/tracks/issues/322) - Document handler-to-template integration in generated README

### Phase 3: Component Pattern Templates (Tasks 21-30)

1. [#323](https://github.com/anomalousventures/tracks/issues/323) - Create nav.templ component template
2. [#324](https://github.com/anomalousventures/tracks/issues/324) - Create footer.templ component template
3. [#325](https://github.com/anomalousventures/tracks/issues/325) - Create flash message component template
4. [#326](https://github.com/anomalousventures/tracks/issues/326) - Create breadcrumb component template
5. [#327](https://github.com/anomalousventures/tracks/issues/327) - Create card component template
6. [#328](https://github.com/anomalousventures/tracks/issues/328) - Create form input component template
7. [#329](https://github.com/anomalousventures/tracks/issues/329) - Create button component template
8. [#330](https://github.com/anomalousventures/tracks/issues/330) - Create modal component template
9. [#331](https://github.com/anomalousventures/tracks/issues/331) - Create component props pattern documentation template
10. [#332](https://github.com/anomalousventures/tracks/issues/332) - Create component composition examples in generated README

### Phase 4: Advanced Pattern Templates (Tasks 31-40)

1. [#333](https://github.com/anomalousventures/tracks/issues/333) - Create HTMX attribute helper templates
2. [#334](https://github.com/anomalousventures/tracks/issues/334) - Create dark mode toggle component template
3. [#335](https://github.com/anomalousventures/tracks/issues/335) - Create layout with sidebar template
4. [#336](https://github.com/anomalousventures/tracks/issues/336) - Create partial rendering pattern template
5. [#337](https://github.com/anomalousventures/tracks/issues/337) - Create form validation display template
6. [#338](https://github.com/anomalousventures/tracks/issues/338) - Create list page pattern template
7. [#339](https://github.com/anomalousventures/tracks/issues/339) - Create detail page pattern template
8. [#340](https://github.com/anomalousventures/tracks/issues/340) - Create template error handling pattern
9. [#341](https://github.com/anomalousventures/tracks/issues/341) - Create template performance documentation
10. [#342](https://github.com/anomalousventures/tracks/issues/342) - Create templ troubleshooting guide template

### Phase 5: ProjectGenerator Integration & Testing (Tasks 41-50)

1. [#343](https://github.com/anomalousventures/tracks/issues/343) - Wire view directory structure into ProjectGenerator
2. [#344](https://github.com/anomalousventures/tracks/issues/344) - Wire all .templ templates into ProjectGenerator
3. [#345](https://github.com/anomalousventures/tracks/issues/345) - Wire helpers.go template into ProjectGenerator
4. [#346](https://github.com/anomalousventures/tracks/issues/346) - Wire handler templates into ProjectGenerator
5. [#347](https://github.com/anomalousventures/tracks/issues/347) - Update go.mod template rendering to include templ
6. [#348](https://github.com/anomalousventures/tracks/issues/348) - Update Makefile template rendering for templ targets
7. [#349](https://github.com/anomalousventures/tracks/issues/349) - Test generated templates compile with `go tool templ generate`
8. [#350](https://github.com/anomalousventures/tracks/issues/350) - Test generated handlers render templates correctly
9. [#351](https://github.com/anomalousventures/tracks/issues/351) - Integration test: verify generated project's template tests pass
10. [#352](https://github.com/anomalousventures/tracks/issues/352) - Integration test: verify generated pages render via HTTP (using httptest, not browser)

## Dependencies

### Prerequisites

- Phase 0 completed (project generation working)
- Epic 1.1 completed (Chi router and handlers)
- Go 1.25+ (tool directive support)

### External Dependencies

- `github.com/a-h/templ` - Template engine (added to generated go.mod)
- HTMX (loaded via CDN initially, bundled in Epic 1.4)
- Standard library: `html/template` (for SafeHTML helper)

### Blocks

- Epic 1.3 (HashFS Assets) - needs templates for asset URL helpers
- Epic 1.4 (Web Build Pipeline) - needs templates for TailwindCSS class scanning
- Epic 1.5 (Templ-UI Integration) - builds on component patterns

## Acceptance Criteria

### Templates Created

- [ ] View directory structure template exists
- [ ] base.templ template exists
- [ ] Page templates exist (home, about, error)
- [ ] Component templates exist (nav, footer, meta)
- [ ] helpers.go template exists
- [ ] Handler templates render templ components
- [ ] Test templates verify rendering works

### Generator Integration

- [ ] ProjectGenerator creates view directory structure
- [ ] ProjectGenerator renders all .templ templates
- [ ] ProjectGenerator renders helpers.go
- [ ] Templ dependency appears in generated go.mod
- [ ] Templ generation appears in generated Makefile
- [ ] .templignore appears in generated project

### Generated Code Quality

- [ ] Generated templates compile with `go tool templ generate`
- [ ] Generated handlers render templates without errors
- [ ] Generated template tests pass
- [ ] Generated code passes `go vet`
- [ ] Generated code passes `golangci-lint`

### Testing

- [ ] Unit tests verify template rendering in tracks repo
- [ ] Generated project's tests pass (verified by e2e-workflow)
- [ ] Integration tests verify pages render correctly
- [ ] All CI jobs pass

## Next Epic

[Epic 1.3: HashFS Assets →](./1.3-hashfs-assets.md)
