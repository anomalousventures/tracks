package components

import (
	"fmt"

	"{{ .ModuleName }}/internal/http/routes"
	"{{ .ModuleName }}/internal/http/views/components/ui/button"
	"{{ .ModuleName }}/internal/http/views/components/ui/card"
)

templ CounterDisplay(count int) {
	<div id="counter-display" class="flex flex-col gap-4">
		<p class="text-lg">Current count: <strong class="text-2xl font-bold">{ fmt.Sprintf("%d", count) }</strong></p>
		<div class="flex gap-2 flex-wrap">
			@button.Button(button.Props{
				Type: button.TypeButton,
				Attributes: templ.Attributes{
					"hx-post":   routes.CounterIncrement,
					"hx-target": "#counter-display",
					"hx-swap":   "outerHTML transition:false",
				},
			}) {
				Increment
			}
			@button.Button(button.Props{
				Variant: button.VariantSecondary,
				Type:    button.TypeButton,
				Attributes: templ.Attributes{
					"hx-post":   routes.CounterDecrement,
					"hx-target": "#counter-display",
					"hx-swap":   "outerHTML transition:false",
				},
			}) {
				Decrement
			}
			@button.Button(button.Props{
				Variant: button.VariantOutline,
				Type:    button.TypeButton,
				Attributes: templ.Attributes{
					"hx-post":   routes.CounterReset,
					"hx-target": "#counter-display",
					"hx-swap":   "outerHTML transition:false",
				},
			}) {
				Reset
			}
		</div>
	</div>
}

templ CounterCard(count int) {
	@card.Card() {
		@card.Header() {
			@card.Title() {
				HTMX Counter Example
			}
			@card.Description() {
				This counter demonstrates HTMX partial rendering with server-side state.
				Click the buttons to see instant updates without page reloads.
			}
		}
		@card.Content() {
			@CounterDisplay(count)
		}
	}
}

templ NotificationOOB(message string, messageType string) {
	<div id="notification-area" hx-swap-oob="true" class={ "notification", messageType }>
		<p>{ message }</p>
	</div>
}
