package components

import (
	"{{.ModuleName}}/internal/http/routes"
	"{{.ModuleName}}/internal/http/views/components/ui/button"
)

func activeClass(active bool) string {
	if active {
		return "bg-accent/10"
	}
	return ""
}

type NavLink struct {
	Label  string
	Href   string
	Active bool
}

type NavProps struct {
	Logo      string
	Links     []NavLink
	DarkMode  bool
	MobileNav bool
}

templ Nav(props NavProps) {
	<nav class={ "flex", "items-center", "justify-between", "p-4", "bg-white", "dark:bg-gray-900", "border-b", "border-gray-200", "dark:border-gray-800" }>
		<div class={ "flex", "items-center", "justify-between", "w-full", "max-w-7xl", "mx-auto" }>
			if props.Logo != "" {
				<div class={ "flex-shrink-0" }>
					<a href={ templ.URL(routes.Home) } class={ "text-xl", "font-bold", "text-gray-900", "dark:text-white", "hover:text-gray-700", "dark:hover:text-gray-300" }>{ props.Logo }</a>
				</div>
			}
			<div class={ "flex", "items-center", "space-x-2" }>
				for _, link := range props.Links {
					@button.Button(button.Props{
						Variant: button.VariantGhost,
						Size:    button.SizeSm,
						Href:    link.Href,
						Attributes: templ.Attributes{
							"hx-get":       link.Href,
							"hx-target":    "#content",
							"hx-push-url":  "true",
							"hx-swap":      "innerHTML",
							"aria-current": templ.KV("page", link.Active),
						},
						Class: activeClass(link.Active),
					}) {
						{ link.Label }
					}
				}
			</div>
			if props.MobileNav {
				<button
					class={ "md:hidden", "p-2", "text-gray-700", "dark:text-gray-300", "hover:text-gray-900", "dark:hover:text-white", "focus:outline-none", "focus:ring-2", "focus:ring-offset-2", "focus:ring-offset-gray-100", "focus:ring-gray-500" }
					aria-label="Toggle navigation menu"
					aria-expanded="false"
				>
					<span class={ "block", "w-6", "h-0.5", "bg-current", "mb-1" }></span>
					<span class={ "block", "w-6", "h-0.5", "bg-current", "mb-1" }></span>
					<span class={ "block", "w-6", "h-0.5", "bg-current" }></span>
				</button>
			}
		</div>
	</nav>
}
