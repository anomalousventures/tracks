package logging

import (
	"context"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestLogger_Integration(t *testing.T) {
	logger := NewLogger("production")
	ctx := context.Background()

	t.Run("logger methods don't panic", func(t *testing.T) {
		assert.NotPanics(t, func() {
			logger.Info(ctx).Msg("test info")
			logger.Error(ctx).Msg("test error")
			logger.Debug(ctx).Msg("test debug")
			logger.Warn(ctx).Msg("test warn")
		})
	})
}

func TestWithRequestID(t *testing.T) {
	ctx := context.Background()
	requestID := "test-request-id"

	newCtx := WithRequestID(ctx, requestID)
	assert.NotNil(t, newCtx)

	retrievedID := GetRequestID(newCtx)
	assert.Equal(t, requestID, retrievedID)
}

func TestGetRequestID_EmptyWhenNotSet(t *testing.T) {
	ctx := context.Background()
	requestID := GetRequestID(ctx)
	assert.Empty(t, requestID)
}
