# ⚠️  WARNING: NEVER COMMIT .env FILES TO VERSION CONTROL! ⚠️
#
# This is an example file. Copy it to .env and fill in your real values:
#   cp .env.example .env
#
# The .env file is gitignored to prevent accidentally committing secrets.

# ============================================================================
# Application Runtime Configuration
# These settings are read by the generated application at startup.
# For Tracks CLI project metadata, see .tracks.yaml
#
# Environment variable prefix: {{.EnvPrefix}}_
# ============================================================================

# Environment
{{.EnvPrefix}}_ENVIRONMENT=development

# Server Configuration
{{.EnvPrefix}}_SERVER_PORT=:8080
{{.EnvPrefix}}_SERVER_READ_TIMEOUT=15s
{{.EnvPrefix}}_SERVER_WRITE_TIMEOUT=15s
{{.EnvPrefix}}_SERVER_IDLE_TIMEOUT=60s
{{.EnvPrefix}}_SERVER_SHUTDOWN_TIMEOUT=30s

# Database Configuration
{{- if eq .DBDriver "go-libsql"}}
{{.EnvPrefix}}_DATABASE_URL=file:./{{.ProjectName}}.db
{{- else if eq .DBDriver "sqlite3"}}
{{.EnvPrefix}}_DATABASE_URL=./{{.ProjectName}}.db
{{- else if eq .DBDriver "postgres"}}
# For production, use a connection string without sslmode=disable
{{.EnvPrefix}}_DATABASE_URL=postgres://localhost/{{.ProjectName}}?sslmode=disable
{{- end}}

# Database Connection Pool Settings
{{.EnvPrefix}}_DATABASE_CONNECT_TIMEOUT=10s
{{.EnvPrefix}}_DATABASE_MAX_OPEN_CONNS=25
{{.EnvPrefix}}_DATABASE_MAX_IDLE_CONNS=5
{{.EnvPrefix}}_DATABASE_CONN_MAX_LIFETIME=5m

# Logging Configuration
{{.EnvPrefix}}_LOGGING_LEVEL=info
{{.EnvPrefix}}_LOGGING_FORMAT=json

# ============================================================================
# Middleware Configuration
# See https://go-tracks.io/docs/guides/middleware for full documentation
# ============================================================================

# Request Timeout
# Cancels long-running requests after this duration. Prevents slow clients from
# tying up server resources. Set to 0 to disable (not recommended in production).
# Default: 60s
{{.EnvPrefix}}_MIDDLEWARE_TIMEOUT_REQUEST=60s

# Request Throttling (Concurrent Request Limiting)
# Limits concurrent requests to prevent server overload. When limit is reached,
# new requests wait in backlog queue. Set to 0 to disable (not recommended).
# Default: 100 concurrent requests
{{.EnvPrefix}}_MIDDLEWARE_THROTTLE_LIMIT=100
# Backlog: requests queued when at limit. Set to 0 to reject immediately with 503.
{{.EnvPrefix}}_MIDDLEWARE_THROTTLE_BACKLOG_LIMIT=50
# How long requests wait in backlog before timing out with 503.
{{.EnvPrefix}}_MIDDLEWARE_THROTTLE_BACKLOG_TIMEOUT=30s

# CORS (Cross-Origin Resource Sharing)
# Only enable if your API is accessed from different domains (e.g., SPA on
# different domain, mobile app). For same-origin requests, leave disabled.
# Default: false (same-origin only, most secure)
{{.EnvPrefix}}_MIDDLEWARE_CORS_ENABLED=false
# Origins allowed to make cross-origin requests (comma-separated).
# Use specific origins, never "*" with credentials.
# {{.EnvPrefix}}_MIDDLEWARE_CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
# HTTP methods allowed for cross-origin requests.
# {{.EnvPrefix}}_MIDDLEWARE_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# Headers allowed in cross-origin requests.
# {{.EnvPrefix}}_MIDDLEWARE_CORS_ALLOWED_HEADERS=Accept,Authorization,Content-Type,X-CSRF-Token
# Headers exposed to browser JavaScript (beyond simple headers).
# {{.EnvPrefix}}_MIDDLEWARE_CORS_EXPOSED_HEADERS=
# Allow cookies/auth headers in cross-origin requests. Requires specific origins.
# {{.EnvPrefix}}_MIDDLEWARE_CORS_ALLOW_CREDENTIALS=false
# How long browser caches preflight response (seconds). Higher = fewer OPTIONS requests.
# {{.EnvPrefix}}_MIDDLEWARE_CORS_MAX_AGE=300

# Session Configuration
{{.EnvPrefix}}_SESSION_LIFETIME=24h
{{.EnvPrefix}}_SESSION_COOKIE_NAME=session_id
{{.EnvPrefix}}_SESSION_COOKIE_SECURE=false  # WARNING: Set to true in production to require HTTPS
{{.EnvPrefix}}_SESSION_COOKIE_HTTP_ONLY=true
{{.EnvPrefix}}_SESSION_COOKIE_SAME_SITE=lax

# Secrets (NEVER COMMIT THESE VALUES)
# Generate a secure random key with: openssl rand -base64 32
SECRET_KEY=your-secret-key-here-replace-with-secure-random-value
