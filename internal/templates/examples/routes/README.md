# Route Template Examples

This directory contains reference templates for domain-based routing patterns. These templates are **NOT generated by default** when running `tracks new`.

## Purpose

These example templates demonstrate best practices for:

- Domain-based route organization
- HYPERMEDIA-first routing (serving HTML via templ)
- Type-safe URL generation with helper functions
- Proper slug parameter constants
- Route testing patterns

## Usage

### During Development

Reference these templates when building new route generators:

- Study the patterns and structure
- Understand how RouteURL helper works
- See how slug parameters are defined and exported

### Future Code Generation

These templates will be used by commands like:

```bash
tracks generate resource users
```

The generator will:

1. Read `users.go.tmpl` as the base template
2. Substitute actual resource name and slug parameter
3. Generate `internal/http/routes/users.go` in the target project
4. Generate `internal/http/routes/users_test.go` with proper tests

## Files

- **users.go.tmpl** - Example HYPERMEDIA routes with helpers
  - Shows how to define slug parameters
  - Demonstrates RouteURL helper pattern
  - Includes form routes (`/new`, `/edit`)
  - Type-safe URL generation functions

- **users_test.go.tmpl** - Example route tests
  - Tests parameter constants
  - Tests route pattern formatting
  - Tests URL encoding in helpers
  - Tests RouteURL substitution logic

## Key Patterns

### Slug Parameters

```go
// Unexported path constant (internal detail)
const usersPath = "users"

// Exported slug parameter (handlers need this)
const UserSlugParam = "username"
```

Handlers use the exported constant:

```go
username := chi.URLParam(r, routes.UserSlugParam)
```

### Helper Functions

```go
func UserShowURL(username string) string {
    return RouteURL(UserShow, UserSlugParam, username)
}
```

### HYPERMEDIA Routes

Serve HTML via templ templates, not JSON:

```go
const (
    UserIndex  = "/users"              // List page
    UserShow   = "/users/:username"    // Detail page
    UserNew    = "/users/new"          // New form
    UserCreate = "/users"              // POST handler
    UserEdit   = "/users/:username/edit" // Edit form
    UserUpdate = "/users/:username"    // POST handler
    UserDelete = "/users/:username"    // DELETE handler
)
```

## References

- [ADR-006: Route Reference Constants](../../../../docs/adr/006-route-reference-constants.md)
- [Routing Guide](../../../../website/docs/guides/routing-guide.md)
- [Layer Guide](../../../../website/docs/guides/layer-guide.md)
- [Epic 1.1: Chi Router Setup](../../../../docs/roadmap/phases/1-core-web/epics/1.1-chi-router-setup.md)
